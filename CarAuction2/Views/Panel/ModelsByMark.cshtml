@using CarAuction2.Models.Car
@model CarAuction2.Models.Car.Model

@{
    ViewBag.Title = "title";
    Layout = "~/Views/Shared/_PanelLayout.cshtml";
}

<div class="row">
    <div class="col-md-9">
        <h2>@ViewBag.Mark.Name models</h2>
    </div>
    <div class="col-md-3 text-md-right">
        <a class="btn" href='/Panel/AllMarks'>Back</a>
        <a class="btn btn-warning" href='/Panel/AddModel'>Add a model</a>
    </div>
</div>

@foreach (Model model1 in ViewBag.ModelsByMark)
{
    <div class="row mt-2">
        <div class="col-md-9">
            @Html.DisplayFor(model => model1.Name)
        </div>
        <div class="col-md-3 text-md-right">
            <button data-id="@Html.DisplayFor(model => model1.ModelId)" class="btn btn-danger" type="button">
                Delete
            </button>
        </div>
    </div>
}

<script>
    $(function() {
        $("button.btn-danger").on("click",
            function() {
                let aBtn = $(this);
                $.ajax({
                    url: '/Panel/DeleteModel/',
                    contentType: 'application/json; charset=utf-8',
                    data: { MarkId: aBtn.attr("data-id") },
                    type: 'GET',
                    success: function(result) {
                        aBtn.parent().parent().fadeOut();
                    }
                });
                var id = $(this).attr("data-id");
            });
    });
</script>